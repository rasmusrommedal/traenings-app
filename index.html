<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Laurits' tr√¶ningshjul</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff6600">

<style>
body {
    font-family: 'Comic Sans MS', sans-serif;
    text-align: center;
    background: linear-gradient(to bottom, #6ec6ff, #ffffff);
    margin: 0;
    padding: 20px;
    overflow-x: hidden;
}
.container {
    background: white;
    padding: 20px;
    border-radius: 25px;
    max-width: 450px;
    margin: auto;
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
}
h1 { color: #ff6600; }
input { margin: 5px; padding: 10px; border-radius: 12px; border: 2px solid #ddd; width: 85%; font-size: 14px; }
button { padding: 12px 20px; margin: 10px 5px; font-size: 16px; border-radius: 20px; border: none; background-color: #ffcc00; cursor: pointer; font-weight: bold; }
button:hover { background-color: #ff9900; }

#wheel-container {
    position: relative;
    margin: 20px auto;
    width: 250px;
    height: 250px;
}
#wheel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 8px solid #ff6600;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 18px;
    transition: transform 3s cubic-bezier(0.25,1,0.5,1);
}
#pointer {
    position: absolute;
    top: -10px;
    left: 50%;
    margin-left: -10px;
    width: 0; height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 20px solid red;
}

.progress-bar { width: 100%; background: #eee; border-radius: 20px; margin: 10px 0; }
.progress-fill { height: 22px; border-radius: 20px; background: linear-gradient(to right, #00cc66, #009933); width: 0%; transition: width 0.3s ease; }

.reward-img { height: 150px; width: 100px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.35); opacity: 0.5; transition: 0.4s; }
.reward-img.active { opacity: 1; transform: scale(1.1); }
#rewardMessage { font-size: 20px; color: #ff0000; font-weight: bold; margin-top: 10px; }

/* Konfetti */
.confetti-piece {
    position: absolute;
    width: 8px; height: 8px;
    opacity: 0.8;
    animation: fall 3s linear forwards;
    z-index: 9999;
}
@keyframes fall {
    0% { transform: translateY(0px) rotate(0deg); }
    100% { transform: translateY(600px) rotate(360deg); opacity: 0; }
}
</style>
</head>
<body>

<h1>üéØ Tr√¶nings Hjul v2.2</h1>
<div class="container">

<h3>Indtast 5 √∏velser</h3>
<input type="text" id="ex1" placeholder="√òvelse 1">
<input type="text" id="ex2" placeholder="√òvelse 2">
<input type="text" id="ex3" placeholder="√òvelse 3">
<input type="text" id="ex4" placeholder="√òvelse 4">
<input type="text" id="ex5" placeholder="√òvelse 5">

<div id="wheel-container">
    <div id="pointer"></div>
    <div id="wheel">Drej!</div>
</div>

<button onclick="spinWheel()">Drej üé°</button>
<button onclick="completeExercise()">Udf√∏rt ‚úÖ</button>
<button onclick="resetAll()">Nulstil üîÑ</button>

<h3>√òvelser (0-5)</h3>
<div class="progress-bar"><div id="exerciseProgress" class="progress-fill"></div></div>

<h3>Dage (0-10)</h3>
<div class="progress-bar"><div id="dayProgress" class="progress-fill"></div></div>

<h3>üéÅ 10 dage = Pok√©mon kort</h3>
<img id="rewardCard" class="reward-img" src="pokemonkort.jpg">
<div id="rewardMessage"></div>

</div>

<script>
let exerciseCount = 0;
let dayCount = 0;
let wheelRotation = 0;

function saveData(){
    localStorage.setItem("exerciseCount", exerciseCount);
    localStorage.setItem("dayCount", dayCount);
}

function loadData(){
    exerciseCount = parseInt(localStorage.getItem("exerciseCount")) || 0;
    dayCount = parseInt(localStorage.getItem("dayCount")) || 0;
    updateUI();
}

function spinWheel(){
    const exercises = [
        ex1.value || "√òvelse 1",
        ex2.value || "√òvelse 2",
        ex3.value || "√òvelse 3",
        ex4.value || "√òvelse 4",
        ex5.value || "√òvelse 5"
    ].filter(e => e !== "");

    if(exercises.length===0){ alert("Indtast mindst √©n √∏velse!"); return; }

    const chosen = exercises[Math.floor(Math.random()*exercises.length)];
    const wheel = document.getElementById("wheel");
    wheel.innerText = chosen;

    const spins = Math.floor(Math.random()*3 + 3);
    const deg = spins*360;
    wheelRotation += deg;
    wheel.style.transform = `rotate(${wheelRotation}deg)`;
}

function completeExercise(){
    exerciseCount++;
    if(exerciseCount >= 5){
        exerciseCount = 0;
        dayCount++;
        if(dayCount >=10){
            dayCount=0;
            showReward();
        }
    }
    updateUI();
    saveData();
}

function updateUI(){
    document.getElementById("exerciseProgress").style.width = (exerciseCount/5)*100 + "%";
    document.getElementById("dayProgress").style.width = (dayCount/10)*100 + "%";
}

function resetAll(){
    exerciseCount = 0;
    dayCount = 0;
    document.getElementById("rewardMessage").innerText = "";
    document.getElementById("rewardCard").classList.remove("active");
    updateUI();
    saveData();
}

function showReward(){
    const rewardMsg = document.getElementById("rewardMessage");
    const rewardCard = document.getElementById("rewardCard");
    rewardMsg.innerText = "üéâ DU HAR VUNDET ET POK√âMON KORT! üéâ";
    rewardCard.classList.add("active");
    createConfetti(200); // masser af konfetti
}

function createConfetti(amount){
    for(let i=0;i<amount;i++){
        const div = document.createElement("div");
        div.classList.add("confetti-piece");
        div.style.left=Math.random()*window.innerWidth+"px";
        div.style.backgroundColor=`hsl(${Math.random()*360},100%,50%)`;
        div.style.width = (Math.random()*6+4)+"px";
        div.style.height = (Math.random()*6+4)+"px";
        div.style.animationDuration = (Math.random()*2+2)+"s";
        document.body.appendChild(div);
        setTimeout(()=>{div.remove();},4000);
    }
}

if('serviceWorker' in navigator){ navigator.serviceWorker.register('service-worker.js'); }
loadData();
</script>

</body>
</html>
